# Auto Backup Linux Cron å®šæ—¶ä»»åŠ¡è®¾ç½®æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨æ–¹æ³•

```bash
# 1. è¿›å…¥è„šæœ¬ç›®å½•
cd /home/star/tools/ğŸŒ¿YLX-STUDIO/å¤‡ç”¨æ–‡ä»¶/gistä»£ç /è‡ªåŠ¨å¤‡ä»½ä¸Šä¼ /pythonåŒ…/auto-backup-linux

# 2. ç¡®ä¿å·²åˆ›å»ºæ‰§è¡Œè„šæœ¬ auto-backup-once.sh
# ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼Œè¯·å…ˆåˆ›å»ºè¯¥è„šæœ¬ï¼‰

# 3. æ·»åŠ æ‰§è¡Œæƒé™
chmod +x setup-cron-daily.sh

# 4. è¿è¡Œè®¾ç½®è„šæœ¬
./setup-cron-daily.sh
```

**é‡è¦**ï¼šè¯·ç¡®ä¿åœ¨æ‰§è¡Œè®¾ç½®è„šæœ¬ä¹‹å‰ï¼Œå·²æ‰‹åŠ¨åˆ›å»º `auto-backup-once.sh` æ‰§è¡Œè„šæœ¬ã€‚

## è„šæœ¬åŠŸèƒ½

`setup-cron-daily.sh` è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹é…ç½®ï¼š

1. âœ… **æŸ¥æ‰¾ auto-backup å‘½ä»¤** - è‡ªåŠ¨æ£€æµ‹å®‰è£…è·¯å¾„
2. âœ… **æ£€æµ‹æ‰§è¡Œè„šæœ¬** - è‡ªåŠ¨æ£€æµ‹å·²å­˜åœ¨çš„ `auto-backup-once.sh` è„šæœ¬
3. âœ… **å®‰è£… cron** - å¦‚æœæœªå®‰è£…ï¼Œè‡ªåŠ¨å®‰è£… cron
4. âœ… **å¯åŠ¨ cron æœåŠ¡** - è‡ªåŠ¨å¯åŠ¨å¹¶å¯ç”¨ cron æœåŠ¡
5. âœ… **è®¾ç½®å®šæ—¶ä»»åŠ¡** - è‡ªåŠ¨è®¾ç½®æ¯å¤© 21:00 æ‰§è¡Œå¤‡ä»½

**æ³¨æ„**ï¼šæ‰§è¡Œè„šæœ¬ `auto-backup-once.sh` éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ã€‚

## å®šæ—¶ä»»åŠ¡è¯¦æƒ…

- **æ‰§è¡Œæ—¶é—´**: æ¯å¤© 21:00
- **æ‰§è¡Œå‘½ä»¤**: `auto-backup`
- **æ‰§è¡Œè„šæœ¬**: `auto-backup-once.sh`
- **æ—¥å¿—æ–‡ä»¶**: `~/.dev/Backup/cron.log`

## å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹å®šæ—¶ä»»åŠ¡

```bash
crontab -l
```

### ç¼–è¾‘å®šæ—¶ä»»åŠ¡

```bash
crontab -e
```

### æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f ~/.dev/Backup/cron.log

# æŸ¥çœ‹æœ€è¿‘ 50 è¡Œ
tail -n 50 ~/.dev/Backup/cron.log
```

### æµ‹è¯•æ‰§è¡Œè„šæœ¬

```bash
# æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡å¤‡ä»½
./auto-backup-once.sh
```

### ç®¡ç† cron æœåŠ¡

```bash
# å¦‚æœä½¿ç”¨ systemd
sudo systemctl start cron    # å¯åŠ¨
sudo systemctl stop cron     # åœæ­¢
sudo systemctl status cron   # æŸ¥çœ‹çŠ¶æ€
sudo systemctl enable cron   # å¯ç”¨è‡ªå¯

# å¦‚æœä½¿ç”¨ service
sudo service cron start       # å¯åŠ¨
sudo service cron stop       # åœæ­¢
sudo service cron status     # æŸ¥çœ‹çŠ¶æ€
```

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ‰¾ä¸åˆ° auto-backup å‘½ä»¤

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿å·²å®‰è£… auto-backup-linux
2. æ£€æŸ¥ PATH ç¯å¢ƒå˜é‡
3. æ‰‹åŠ¨æŒ‡å®šè·¯å¾„ï¼šè¿è¡Œè„šæœ¬æ—¶è¾“å…¥å®Œæ•´è·¯å¾„

### é—®é¢˜ 2: cron æœåŠ¡æœªè¿è¡Œ

**è§£å†³æ–¹æ³•ï¼š**
```bash
# å¦‚æœä½¿ç”¨ systemd
sudo systemctl start cron
sudo systemctl enable cron

# å¦‚æœä½¿ç”¨ service
sudo service cron start
```

### é—®é¢˜ 3: å®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œ

**æ£€æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ cron æœåŠ¡æ˜¯å¦è¿è¡Œï¼š`ps aux | grep cron`
2. æŸ¥çœ‹ cron æ—¥å¿—ï¼š`sudo tail -f /var/log/syslog | grep CRON`
3. æ£€æŸ¥æ‰§è¡Œè„šæœ¬æƒé™ï¼š`ls -l auto-backup-once.sh`
4. æ‰‹åŠ¨æµ‹è¯•æ‰§è¡Œè„šæœ¬ï¼š`./auto-backup-once.sh`

### é—®é¢˜ 4: å¤‡ä»½ä»»åŠ¡è¶…æ—¶

**è¯´æ˜ï¼š**
- `auto-backup` æ˜¯æŒç»­è¿è¡Œçš„ç¨‹åºï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 2 å°æ—¶
- å¦‚æœå¤‡ä»½åœ¨ 2 å°æ—¶å†…å®Œæˆï¼Œä¼šæ­£å¸¸é€€å‡º
- å¦‚æœè¶…è¿‡ 2 å°æ—¶ï¼Œä¼šè¢«å¼ºåˆ¶ç»ˆæ­¢ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰

**å»ºè®®ï¼š**
- å¦‚æœç»å¸¸è¶…æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ systemd æœåŠ¡è€Œä¸æ˜¯ cron
- å‚è€ƒ `AUTO_START_GUIDE.md` äº†è§£ systemd é…ç½®æ–¹æ³•

## æ–‡ä»¶è¯´æ˜

- `setup-cron-daily.sh` - ä¸»è®¾ç½®è„šæœ¬
- `auto-backup-once.sh` - æ‰§è¡Œè„šæœ¬ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼‰
- `~/.dev/Backup/cron.log` - æ‰§è¡Œæ—¥å¿—
- `~/.dev/Backup/backup.log` - å¤‡ä»½æ—¥å¿—

## æ‰§è¡Œè„šæœ¬ä½ç½®

è„šæœ¬ä¼šåœ¨ä»¥ä¸‹ä½ç½®æŸ¥æ‰¾ `auto-backup-once.sh`ï¼š

1. `./auto-backup-once.sh` (è„šæœ¬åŒç›®å½•)
2. `~/.local/bin/auto-backup-once.sh`
3. `~/bin/auto-backup-once.sh`
4. `/usr/local/bin/auto-backup-once.sh`
5. `~/auto-backup-once.sh`

å¦‚æœæœªæ‰¾åˆ°ï¼Œè„šæœ¬ä¼šæç¤ºä½ æ‰‹åŠ¨æŒ‡å®šè·¯å¾„ã€‚

## æ³¨æ„äº‹é¡¹

1. âš ï¸ **WSL ç”¨æˆ·**: å¦‚æœæœªå¯ç”¨ systemdï¼Œéœ€è¦åœ¨ `.bashrc` ä¸­æ·»åŠ è‡ªåŠ¨å¯åŠ¨ cron çš„ä»£ç 
2. âš ï¸ **æƒé™é—®é¢˜**: æŸäº›æ“ä½œå¯èƒ½éœ€è¦ root æƒé™
3. âš ï¸ **è·¯å¾„é—®é¢˜**: ç¡®ä¿ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œé¿å…ç¯å¢ƒå˜é‡é—®é¢˜
4. âš ï¸ **è¶…æ—¶è®¾ç½®**: é»˜è®¤è¶…æ—¶ 2 å°æ—¶ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ `auto-backup-once.sh` ä¸­çš„ `BACKUP_TIMEOUT` å˜é‡

## ç›¸å…³æ–‡æ¡£

- `AUTO_START_GUIDE.md` - å®Œæ•´çš„è‡ªå¯åŠ¨é…ç½®æŒ‡å—
- `WSL_CRON_SETUP.md` - WSL ä¸“ç”¨çš„ cron é…ç½®æŒ‡å—
- `WSL_SYSTEMD_SETUP.md` - WSL ä¸“ç”¨çš„ systemd é…ç½®æŒ‡å—

